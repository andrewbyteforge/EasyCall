# =============================================================================
# FILE: easycall/backend/setup.cfg
# =============================================================================
# Configuration for Flake8, isort, pytest, and other tools
# =============================================================================

# -----------------------------------------------------------------------------
# Flake8 Configuration
# -----------------------------------------------------------------------------
[flake8]
# Maximum line length (Black uses 88 by default)
max-line-length = 88

# Directories to exclude
exclude =
    .git,
    __pycache__,
    venv,
    .venv,
    migrations,
    .eggs,
    *.egg,
    build,
    dist,
    node_modules

# Ignored error codes
# E203: Whitespace before ':' (conflicts with Black)
# E266: Too many leading '#' for block comment
# E501: Line too long (handled by max-line-length)
# W503: Line break before binary operator (conflicts with Black)
# W504: Line break after binary operator
ignore = E203, E266, W503, W504

# Per-file ignores
per-file-ignores =
    # Allow unused imports in __init__.py
    __init__.py: F401
    # Allow longer lines in settings
    settings.py: E501
    # Allow star imports in admin
    admin.py: F403, F405

# Complexity threshold
max-complexity = 12

# Show source code for each error
show-source = True

# Count errors
count = True

# Statistics
statistics = True

# Select specific error codes to check
select = B,C,E,F,W,T4,B9

# Docstring convention (Google style)
docstring-convention = google

# -----------------------------------------------------------------------------
# isort Configuration
# -----------------------------------------------------------------------------
[isort]
# Use Black-compatible settings
profile = black
line_length = 88

# Import sections
sections = FUTURE,STDLIB,THIRDPARTY,FIRSTPARTY,LOCALFOLDER

# Known first-party packages
known_first_party = apps,config,fields,utils

# Skip patterns
skip = venv,.venv,migrations,node_modules

# Force single line imports for future
force_single_line = False

# Combine as imports
combine_as_imports = True

# Include trailing comma
include_trailing_comma = True

# Use parentheses for line continuation
use_parentheses = True

# Ensure newline before comments
ensure_newline_before_comments = True

# -----------------------------------------------------------------------------
# pytest Configuration
# -----------------------------------------------------------------------------
[tool:pytest]
DJANGO_SETTINGS_MODULE = config.settings

# Test paths
testpaths = tests

# Python files to discover
python_files = test_*.py *_test.py tests.py

# Python classes to discover
python_classes = Test*

# Python functions to discover
python_functions = test_*

# Add options
addopts =
    -v
    --strict-markers
    --tb=short
    --cov=apps
    --cov-report=term-missing
    --cov-report=html:htmlcov
    --cov-fail-under=70

# Markers
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
    unit: marks tests as unit tests

# Filter warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Async mode
asyncio_mode = auto

# -----------------------------------------------------------------------------
# Coverage Configuration
# -----------------------------------------------------------------------------
[coverage:run]
source = apps
omit =
    */migrations/*
    */tests/*
    */__init__.py
    */admin.py

branch = True

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    if self.debug:
    if settings.DEBUG
    raise AssertionError
    raise NotImplementedError
    if 0:
    if __name__ == .__main__.:
    class .*\bProtocol\):
    @(abc\.)?abstractmethod

precision = 2
show_missing = True

# -----------------------------------------------------------------------------
# Mypy Configuration (Optional - for type checking)
# -----------------------------------------------------------------------------
[mypy]
python_version = 3.11
warn_return_any = True
warn_unused_configs = True
ignore_missing_imports = True
exclude = migrations|venv|.venv

[mypy-django.*]
ignore_missing_imports = True

[mypy-rest_framework.*]
ignore_missing_imports = True